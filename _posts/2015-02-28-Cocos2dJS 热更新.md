---
layout: post
title: Cocos2dJS 热更新
description: "Cocos2dJS HotFix的简单Demo"
modified: 2015-02-28
tags: [Cocos2d Cocos2dJS HotFix]
---

### 工作需要，在空闲时间看了下Cocos2dJS的热更新。对其进行了一个简单的实现，这里总结分享一下。忍不住吐槽一下Cocos2dJS的官方文档…版本落后很多，当前最新Release版本是V3.3，文档还是V3.0的东西，虽然有借鉴意义，不过感觉还是略坑，不能因为自己是开源就放松对文档的完善啊！国外大的开源项目，文档不都好好的么。

吐槽结束，开始干活！

##Cocos2dJS 热更新
Cocos2dJS 热更新是啥？Cocos2dJS终归还是一个游戏引擎，就以游戏的过程来理解吧。传统游戏需要更新人物动画、地图场景、游戏逻辑、背景音乐怎么办？新出一个APP放到应用商店等用户下载，或者好一点游戏内提示又升级并自行下载完整的新版本APP。<br/>
使用Cocos2dJS的热更新，那就大不一样了。它可以做到进入游戏后下载需要更新的资源甚至是脚本本身，而且更新过程不需要退出游戏。只要用户联网，就能够保证使用到最新的资源。<br/>
这些场景就非常适合使用Hot Fix

 * 想在游戏中对春节开放新活动，不能保证应用商店能准时过审核上线
 
 * 发现一个严重的Bug，需要立即修复
 
 * 需要经常换游戏资源，提升新鲜感
 
 * 先放一个中规中矩的版本过市场审核，然后绕过审核自己直接推新内容，哈哈
 
对于游戏来说，这个特性是比较重量级的。不过因为JavaScript的语言特性能支持这一功能，所以Cocos2dJS能用此特性，而Cocos2d-x无法使用。

##特性
以下是官方提供的特性

 * 多线程并行下载支持
 
 * 两层进度统计信息：文件级以及字节级
 
 * Zip压缩文件支持
 
 * 断点续传
 
 * 详细的错误报告
 
 * 文件下载失败重试支持
 
##Simple
 
 1.  ###manifest配置文件
 
 2.  ###创建后台
 
 3.  ###创建Cocos2dJS工程
 
 4.  ###在后台配置升级文件
 
 5.  ###回到Cocos2dJS工程